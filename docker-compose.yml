services:
  mongo:
      image: mongo:latest
      hostname: mongo
      environment:
        MONGODB_DATA_DIR: /data/db
        MONGO_INITDB_DATABASE: db
      env_file:
        - "mongo.env"
      ports:
        - 27017:27017
      volumes:
        - data_mongo:/data/db

  frontend:
    ports:
      - "3000:3000"
    volumes:
      - "./frontend:/app"
      - "/app/node_modules"
    depends_on:
      - mongo
      - backend

  backend:
    build: ./backend
    ports:
      - "5000:5000"
    env_file:
      - "mongo.env"
    volumes:
      - "./backend:/app"
    depends_on:
      - mongo
      
volumes:
  data_mongo:
